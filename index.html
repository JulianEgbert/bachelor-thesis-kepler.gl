<!DOCTYPE html>
<html>
<body>
    <input type="text" id="inputName"> <button onclick="loadFromInput()"> Load </button>

    <iframe id="kepler.gl-content"> </iframe> 
</body>

<script>
    const MAPBOX_TOKEN = 'pk.eyJ1IjoidWNmLW1hcGJveCIsImEiOiJjbDBiYzlveHgwdnF0M2NtZzUzZWZuNWZ4In0.l9J8ptz3MKwaU9I4PtCcig';

    function loadFromInput() {
        const filename = document.getElementById("inputName").value;
        try {
            loadKeplerFromUrl(filename);
        } catch (e) {
            console.error(e);
        }
        console.log(filename);
    }

    function loadKeplerFromUrl(url) {
        fetch(url).then(function (response) {
            return response.text();
        }).then(function (html) {
            document.getElementById("kepler.gl-content").srcdoc = parseHTML(html);
        });
    }

    function parseHTML(html) {
        // Inject a valid MAPBOX_TOKEN here.
        html = html.replaceAll("const MAPBOX_TOKEN = 'PROVIDE_MAPBOX_TOKEN';", `const MAPBOX_TOKEN = '${MAPBOX_TOKEN}';`);
        return html;
    }
</script>
</html>

<style>
    body {
        margin: 0;
        padding: 0;
    }

    iframe {
        /* border: 0px; */
        position: fixed;
        left: 0px;
        bottom: 0px;
        width: 100vw;
        height: calc(100vh - 100px);
        border-width: 2px 0px 0px 0px;
        border-color: red;
    }
</style>
